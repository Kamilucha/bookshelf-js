{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_check_private_static_access.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_get.js","node_modules/@swc/helpers/lib/_class_static_private_field_spec_get.js","node_modules/@swc/helpers/lib/_define_property.js","src/js/booksAPIService.js","src/js/home/allCategoriesList.js","src/js/ShoppingList.js","src/js/modal.js","src/js/home/topBooks.js","src/js/scrollup.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCheckPrivateStaticAccess;\nfunction _classCheckPrivateStaticAccess(receiver, classConstructor) {\n    if (receiver !== classConstructor) {\n        throw new TypeError(\"Private static access of wrong provenance\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorGet;\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n    if (descriptor.get) {\n        return descriptor.get.call(receiver);\n    }\n    return descriptor.value;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classStaticPrivateFieldSpecGet;\nvar _classCheckPrivateStaticAccess = _interopRequireDefault(require(\"./_class_check_private_static_access\"));\nvar _classApplyDescriptorGet = _interopRequireDefault(require(\"./_class_apply_descriptor_get\"));\nfunction _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n    (0, _classCheckPrivateStaticAccess).default(receiver, classConstructor);\n    (0, _classCheckPrivateStaticAccess).default(descriptor, \"get\");\n    return (0, _classApplyDescriptorGet).default(receiver, descriptor);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","export class BooksAPIService {\n  static #BASE_URL = 'https://books-backend.p.goit.global';\n\n  static endpoints = {\n    categoryList: '/books/category-list',\n    topBooks: '/books/top-books',\n    category: '/books/category',\n    bookInfo: id => `/books/${id}`,\n  };\n\n  constructor() {\n    this.page = 1;\n  }\n\n  async getBookCategories() {\n    const resp = await fetch(\n      `${BooksAPIService.#BASE_URL}${BooksAPIService.endpoints.categoryList}`\n    );\n\n    if (!resp.ok) {\n      throw new Error();\n    }\n\n    return resp.json();\n  }\n\n  async getTopBooks() {\n    const resp = await fetch(\n      `${BooksAPIService.#BASE_URL}${BooksAPIService.endpoints.topBooks}`\n    );\n\n    if (!resp.ok) {\n      throw new Error();\n    }\n\n    return resp.json();\n  }\n\n  async getBooksByCategory(query) {\n    const resp = await fetch(\n      `${BooksAPIService.#BASE_URL}${\n        BooksAPIService.endpoints.category\n      }?category=${query}`\n    );\n\n    if (!resp.ok) {\n      throw new Error();\n    }\n\n    return resp.json();\n  }\n\n  async getBookInfo(id) {\n    const resp = await fetch(\n      `${BooksAPIService.#BASE_URL}${BooksAPIService.endpoints.bookInfo(id)}`\n    );\n\n    if (!resp.ok) {\n      throw new Error();\n    }\n\n    return resp.json();\n  }\n}\n","import {BooksAPIService} from '../booksAPIService'\n\nconst list = document.querySelector('.list-js')\nconst listGenres = new BooksAPIService()\n\nasync function fetchBookCategories() {\n    try {\n        const data = await listGenres.getBookCategories()\n        renderMarkupList(data)\n    }\n    catch(error) {\n        console.log(error)\n    }\n}\n\nfetchBookCategories()\n\nfunction renderMarkupList(genres) {\n    const markup = genres.map((genre) =>{\n        return `<li class='genres-item'><button type='button' class='genres-btn genres-btn-js'>${genre.list_name}</button></li>`\n    }).join('')\n    list.insertAdjacentHTML('beforeend', markup)\n}","export default class ShoppingList {\n  constructor(book, linkToBtn) {\n    this.book = book;\n    this.currentShoppingListItems = localStorage.getItem('shoppingList');\n    if (this.currentShoppingListItems == null) {\n      this.currentShoppingListItems = [];\n    } else {\n      this.currentShoppingListItems = JSON.parse(this.currentShoppingListItems);\n    }\n    this.index = this.currentShoppingListItems.findIndex(\n      item => item._id == book._id\n    );\n    this.isBookAlreadyInShoppingList = this.index > -1;\n    this.linkToBtn = linkToBtn;\n    this.linkToBtn.textContent =\n      (this.isBookAlreadyInShoppingList ? 'Remove from the ' : 'Add to ') +\n      'Shopping List';\n    this.notification = document.createElement('div');\n    this.notification.textContent =\n      'Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.';\n    this.notification.className = 'notification';\n    if (this.isBookAlreadyInShoppingList) {\n      debugger\n      linkToBtn.insertAdjacentElement('afterend', this.notification);\n    }\n  }\n\n  handleBook(linkToBtn) {\n    if (this.isBookAlreadyInShoppingList) {\n      this.currentShoppingListItems.splice(this.index, 1);\n      this.index = -1;\n      this.isBookAlreadyInShoppingList = false;\n      this.notification.remove();\n    } else {\n      this.index = this.currentShoppingListItems.length;\n      this.currentShoppingListItems.push(this.book);\n      this.isBookAlreadyInShoppingList = true;\n      this.linkToBtn.insertAdjacentElement('afterend', this.notification);\n    }\n    localStorage.setItem(\n      'shoppingList',\n      JSON.stringify(this.currentShoppingListItems)\n    );\n    this.linkToBtn.textContent =\n      (this.isBookAlreadyInShoppingList ? 'Remove from the ' : 'Add to ') +\n      'Shopping List';\n  }\n}\n","import ShoppingList from './ShoppingList';\n\nexport default function renderModal(card) {\n  let modalBackground = document.createElement('div');\n  modalBackground.className = 'modal_background';\n\n  let modalBody = document.createElement('div');\n  modalBody.className = 'modal_body';\n\n  modalBackground.append(modalBody);\n\n  let buyLinks = card.buy_links.filter(link => [\"Amazon\", \"Apple Books\", \"Bookshop\"].includes(link.name)).map(link => {\n    let url = `<a href=\"${link.url}\" title=\"${link.name}\">SVG</a>`\n    return url\n  }).join('')\n\n  modalBody.innerHTML = `\n        <div class=\"flex gap-24 mb-40\">\n            <img src=\"${card.book_image}\" alt=\"\">\n            <div>\n                <div class=\"card_title\">${card.title}</div>\n                <div class=\"card_author\">${card.author}</div>\n                <div class=\"card_description\">${card.description}</div>\n                <div class=\"flex gap-20\">\n                ${buyLinks}\n                </div>\n                \n\n            </div>\n        </div>\n        `;\n  let closeBtn = document.createElement('button');\n  closeBtn.className = 'close_btn';\n  closeBtn.textContent = 'x';\n  closeBtn.addEventListener('click', closeHandler);\n\n  modalBackground.addEventListener('click', closeHandler);\n\n  modalBody.onclick = function (event) {\n    event.stopPropagation();\n  };\n\n  function closeHandler() {\n    modalBackground.remove();\n    cleanEventListeners();\n  }\n\n  function escapeHandler(event) {\n    if (event.key == 'Escape') {\n      closeHandler();\n    }\n  }\n\n  function cleanEventListeners() {\n    closeBtn.removeEventListener('click', closeHandler);\n    modalBackground.removeEventListener('click', closeHandler);\n    document.removeEventListener('keydown', escapeHandler);\n  }\n\n  let shoppingListEl = document.createElement('button');\n  shoppingListEl.className = 'btn';\n  modalBody.append(closeBtn, shoppingListEl);\n  let currentBook = new ShoppingList(card, shoppingListEl);\n  shoppingListEl.onclick = function () {\n    currentBook.handleBook();\n  };\n\n  document.addEventListener('keydown', escapeHandler);\n  document.body.append(modalBackground);\n}\n","import { BooksAPIService } from '../booksAPIService';\nimport renderModal from '../modal'\n\nconst bookApi = new BooksAPIService();\nlet booksContainer = document.querySelector('.books_container');\n\nasync function renderTopBooks() {\n  let topBooks = await bookApi.getTopBooks();\n  console.log(topBooks);\n  topBooks.forEach(group => {\n    let books = group.books.slice(0,5).map(renderCard)\n    let groupEl = document.createElement(\"div\")\n    groupEl.className = \"group\"\n    groupEl.innerHTML = `\n        <div class=\"group_title\">${group.list_name}</div>\n    `\n\n    let card_list = document.createElement(\"div\")\n    card_list.className = \"card_list\"\n    card_list.append(...books)\n\n    let seeMoreBtn = document.createElement(\"button\")\n    seeMoreBtn.textContent = \"See More\"\n    groupEl.append(card_list,seeMoreBtn)\n\n    booksContainer.append(groupEl)\n  })\n}\nrenderTopBooks();\n\nfunction renderCard(card) {\n    let cardEl = document.createElement(\"div\")\n    cardEl.className = \"card\";\n    \n    cardEl.onclick = function() {\n        renderModal(card)\n    }\n    cardEl.innerHTML = `\n        <img src=\"${card.book_image}\" alt=\"${card.title}\">\n        <div class=\"book_title\">${card.title}</div>\n        <div class=\"book_author\">${card.author}</div>\n    `;\n    return cardEl\n}\n","\nconst calcScrollValue =  () =>{\n  const refs ={\n    scrollProgress:document.querySelector(\".progress\"),\n    progressValue:document.querySelector(\".progress-value\"),\n    pos:document.documentElement.scrollTop,\n  }\nconst calcHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;\nconst  scrollValue = Math.round((refs.pos * 100)/ calcHeight);\nif (refs.pos > 100){\nrefs.scrollProgress.style.display = \"grid\";\n} else {\n  refs.scrollProgress.style.display = \"none\";\n}\nrefs.scrollProgress.addEventListener(\"click\", () =>{\ndocument.documentElement.scrollTop = 0;\n});\n};\nwindow.onscroll = calcScrollValue;\nwindow.onload = calcScrollValue;\n"],"names":["Object","defineProperty","module","exports","value","default","receiver","classConstructor","TypeError","descriptor","get","call","$cf6c6c300826f12e$exports","$cf6c6c300826f12e$var$_classCheckPrivateStaticAccess","$cf6c6c300826f12e$var$_classApplyDescriptorGet","$cf6c6c300826f12e$var$_interopRequireDefault","parcelRequire","obj","__esModule","$da4b248c00322402$exports","key","enumerable","configurable","writable","$2c1df7b47ca05c8f$export$8c8e3ef1bc6b97ae","async","resp","fetch","$parcel$interopDefault","$2c1df7b47ca05c8f$var$_BASE_URL","endpoints","categoryList","ok","Error","json","topBooks","query","category","id","bookInfo","constructor","this","page","$0237b27458a6883e$var$list","document","querySelector","$0237b27458a6883e$var$listGenres","genres","markup","map","genre","list_name","join","insertAdjacentHTML","$0237b27458a6883e$var$renderMarkupList","getBookCategories","error","console","log","$0237b27458a6883e$var$fetchBookCategories","$96a1421810e76d1c$export$2e2bcd8739ae039","handleBook","linkToBtn","isBookAlreadyInShoppingList","currentShoppingListItems","splice","index","notification","remove","length","push","book","insertAdjacentElement","localStorage","setItem","JSON","stringify","textContent","getItem","parse","findIndex","item","_id","createElement","className","$8a7e756c566dd1ea$export$2e2bcd8739ae039","card","modalBackground","modalBody","append","buyLinks","buy_links","filter","link","includes","name","url","innerHTML","book_image","title","author","description","closeBtn","closeHandler","removeEventListener","escapeHandler","event","addEventListener","onclick","stopPropagation","shoppingListEl","currentBook","body","$f0966f5ca100bb2f$var$bookApi","$f0966f5ca100bb2f$var$booksContainer","$f0966f5ca100bb2f$var$renderCard","cardEl","getTopBooks","forEach","group","books","slice","groupEl","card_list","seeMoreBtn","$f0966f5ca100bb2f$var$renderTopBooks","$1c5798ed1721818f$var$calcScrollValue","refs","scrollProgress","progressValue","pos","documentElement","scrollTop","calcHeight","scrollHeight","clientHeight","Math","round","style","display","window","onscroll","onload"],"version":3,"file":"index.e7bb0eab.js.map"}