function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},i=t.parcelRequire7d2c;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return o[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire7d2c=i),i.register("oGzBH",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}})),i.register("iaRLo",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}}));var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e,t,o){return r.default(e,t),r.default(o,"get"),c.default(e,o)};var r=a(i("oGzBH")),c=a(i("iaRLo"));function a(e){return e&&e.__esModule?e:{default:e}}var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t,o){t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o;return e};class d{async getBookCategories(){const t=await fetch(`${e(s)(d,d,u)}${d.endpoints.categoryList}`);if(!t.ok)throw new Error;return t.json()}async getTopBooks(){const t=await fetch(`${e(s)(d,d,u)}${d.endpoints.topBooks}`);if(!t.ok)throw new Error;return t.json()}async getBooksByCategory(t){const o=await fetch(`${e(s)(d,d,u)}${d.endpoints.category}?category=${t}`);if(!o.ok)throw new Error;return o.json()}async getBookInfo(t){const o=await fetch(`${e(s)(d,d,u)}${d.endpoints.bookInfo(t)}`);if(!o.ok)throw new Error;return o.json()}constructor(){this.page=1}}var u={writable:!0,value:"https://books-backend.p.goit.global"};e(l)(d,"endpoints",{categoryList:"/books/category-list",topBooks:"/books/top-books",category:"/books/category",bookInfo:e=>`/books/${e}`});const p=document.querySelector(".list-js"),h=new d;!async function(){try{!function(e){const t=e.map((e=>`<li class='genres-item'><button type='button' class='genres-btn genres-btn-js'>${e.list_name}</button></li>`)).join("");p.insertAdjacentHTML("beforeend",t)}(await h.getBookCategories())}catch(e){console.log(e)}}();class m{handleBook(e){this.isBookAlreadyInShoppingList?(this.currentShoppingListItems.splice(this.index,1),this.index=-1,this.isBookAlreadyInShoppingList=!1,this.notification.remove()):(this.index=this.currentShoppingListItems.length,this.currentShoppingListItems.push(this.book),this.isBookAlreadyInShoppingList=!0,this.linkToBtn.insertAdjacentElement("afterend",this.notification)),localStorage.setItem("shoppingList",JSON.stringify(this.currentShoppingListItems)),this.linkToBtn.textContent=(this.isBookAlreadyInShoppingList?"Remove from the ":"Add to ")+"Shopping List"}constructor(e,t){this.book=e,this.currentShoppingListItems=localStorage.getItem("shoppingList"),null==this.currentShoppingListItems?this.currentShoppingListItems=[]:this.currentShoppingListItems=JSON.parse(this.currentShoppingListItems),this.index=this.currentShoppingListItems.findIndex((t=>t._id==e._id)),this.isBookAlreadyInShoppingList=this.index>-1,this.linkToBtn=t,this.linkToBtn.textContent=(this.isBookAlreadyInShoppingList?"Remove from the ":"Add to ")+"Shopping List",this.notification=document.createElement("div"),this.notification.textContent="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",this.notification.className="notification",this.isBookAlreadyInShoppingList&&t.insertAdjacentElement("afterend",this.notification)}}function g(e){let t=document.createElement("div");t.className="modal_background";let o=document.createElement("div");o.className="modal_body",t.append(o);let n=e.buy_links.filter((e=>["Amazon","Apple Books","Bookshop"].includes(e.name))).map((e=>`<a href="${e.url}" title="${e.name}">SVG</a>`)).join("");o.innerHTML=`\n        <div class="flex gap-24 mb-40">\n            <img src="${e.book_image}" alt="">\n            <div>\n                <div class="card_title">${e.title}</div>\n                <div class="card_author">${e.author}</div>\n                <div class="card_description">${e.description}</div>\n                <div class="flex gap-20">\n                ${n}\n                </div>\n                \n\n            </div>\n        </div>\n        `;let i=document.createElement("button");function s(){t.remove(),i.removeEventListener("click",s),t.removeEventListener("click",s),document.removeEventListener("keydown",r)}function r(e){"Escape"==e.key&&s()}i.className="close_btn",i.textContent="x",i.addEventListener("click",s),t.addEventListener("click",s),o.onclick=function(e){e.stopPropagation()};let c=document.createElement("button");c.className="btn",o.append(i,c);let a=new m(e,c);c.onclick=function(){a.handleBook()},document.addEventListener("keydown",r),document.body.append(t)}const f=new d;let k=document.querySelector(".books_container");function v(e){let t=document.createElement("div");return t.className="card",t.onclick=function(){g(e)},t.innerHTML=`\n        <img src="${e.book_image}" alt="${e.title}">\n        <div class="book_title">${e.title}</div>\n        <div class="book_author">${e.author}</div>\n    `,t}!async function(){let e=await f.getTopBooks();console.log(e),e.forEach((e=>{let t=e.books.slice(0,5).map(v),o=document.createElement("div");o.className="group",o.innerHTML=`\n        <div class="group_title">${e.list_name}</div>\n    `;let n=document.createElement("div");n.className="card_list",n.append(...t);let i=document.createElement("button");i.textContent="See More",o.append(n,i),k.append(o)}))}();const b=()=>{const e={scrollProgress:document.querySelector(".progress"),progressValue:document.querySelector(".progress-value"),pos:document.documentElement.scrollTop},t=document.documentElement.scrollHeight-document.documentElement.clientHeight;Math.round(100*e.pos/t);e.pos>100?e.scrollProgress.style.display="grid":e.scrollProgress.style.display="none",e.scrollProgress.addEventListener("click",(()=>{document.documentElement.scrollTop=0}))};window.onscroll=b,window.onload=b;
//# sourceMappingURL=index.e7bb0eab.js.map
